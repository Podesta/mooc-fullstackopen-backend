{"version":3,"sources":["services/persons.jsx","components/Filter.jsx","components/PrintSubtitle.jsx","components/AddNewPerson.jsx","components/PrintSinglePerson.jsx","components/PrintPersons.jsx","components/AddMessage.jsx","components/ErrMessage.jsx","App.jsx","index.jsx"],"names":["baseUrl","toExport","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","update","put","Filter","filterName","handleFilterName","value","onChange","PrintSubTitle","title","AddNewPerson","submitAction","newName","newPhone","handleNewName","handleNewPhone","onSubmit","type","PrintSinglePerson","name","number","handleDelete","onClick","PrintPersons","filteredPersons","map","person","messageStyle","color","background","borderStyle","fontSize","borderRadius","padding","marginBottom","AddMessage","message","style","ErrMessage","App","useState","persons","setPersons","setNewName","setNewPhone","setFilterName","addMessage","setAddMessage","errMessage","setErrMessage","useEffect","personsService","filter","toLowerCase","includes","event","target","preventDefault","some","existingPerson","find","window","confirm","updatedPerson","console","log","setTimeout","addedPerson","concat","toRemove","res","catch","e","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.877f26ab.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data);\n}\n\nconst create = (newPerson) => {\n  return axios.post(baseUrl, newPerson).then(response => response.data);\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`).then(response => response);\n}\n\nconst update = (id, newPerson) => {\n  return axios.put(`${baseUrl}/${id}`, newPerson).then(response => response.data);\n}\n\nconst toExport = { getAll, create, remove, update };\nexport default toExport;\n","import React from 'react';\n\nconst Filter = ({ filterName, handleFilterName }) => (\n  <div>\n    filter shown with <input value={filterName} onChange={handleFilterName}/>\n  </div>\n);\n\nexport default Filter;\n","import React from 'react';\n\nconst PrintSubTitle = ({ title }) => <h3>{title}</h3>;\n\nexport default PrintSubTitle;\n","import React from 'react';\n\nconst AddNewPerson = ({ submitAction, newName, newPhone, handleNewName, handleNewPhone}) => {\n  return (\n    <form onSubmit={submitAction}>\n      <div>\n        name: <input value={newName} onChange={handleNewName}/>\n      </div>\n      <div>\n        number: <input value={newPhone} onChange={handleNewPhone}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n}\n\nexport default AddNewPerson;\n","import React from 'react';\n\nconst PrintSinglePerson = ({ name, number, handleDelete }) => (\n  <div>\n    {name} {number} <button onClick={handleDelete} type=\"text\">delete</button>\n  </div>\n);\n\nexport default PrintSinglePerson;\n","import React from 'react';\nimport PrintSinglePerson from './PrintSinglePerson';\n\nconst PrintPersons = ({ filteredPersons, handleDelete }) => (\n  filteredPersons.map(person =>\n    <PrintSinglePerson\n      key={person.name}\n      name={person.name}\n      number={person.number}\n      handleDelete={() => handleDelete(person.id)}\n    />\n  )\n);\n\nexport default PrintPersons;\n","import React from 'react';\n\nconst AddMessage = ({ message }) => {\n  if (message === null) {\n    return <></>;\n  }\n\n  return (\n    <div style={messageStyle}>\n      {message}\n    </div>\n  );\n}\n\nconst messageStyle = {\n  color: 'green',\n  background: 'lightgray',\n  borderStyle: 'solid',\n  fontSize: 20,\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10\n}\n\nexport default AddMessage;\n","import React from 'react';\n\nconst ErrMessage = ({ message }) => {\n  if (message === null) {\n    return <></>;\n  }\n\n  return (\n    <div style={messageStyle}>\n      {message}\n    </div>\n  );\n}\n\nconst messageStyle = {\n  color: 'red',\n  background: 'lightgray',\n  borderStyle: 'solid',\n  fontSize: 20,\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10\n}\n\nexport default ErrMessage;\n","import React, { useState, useEffect } from 'react';\nimport personsService from './services/persons.jsx';\nimport Filter from './components/Filter';\nimport PrintSubTitle from './components/PrintSubtitle';\nimport AddNewPerson from './components/AddNewPerson';\nimport PrintPersons from './components/PrintPersons';\nimport AddMessage from './components/AddMessage';\nimport ErrMessage from './components/ErrMessage';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newPhone, setNewPhone] = useState('');\n  const [filterName, setFilterName] = useState('');\n  const [addMessage, setAddMessage] = useState(null);\n  const [errMessage, setErrMessage] = useState(null);\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(persons => {\n        setPersons(persons)\n      });\n  }, []);\n\n\n  const handleFilterName = (event) => {\n    setFilterName(event.target.value);\n  }\n\n  // If nothing si typed on searchbar, return empty array\n  const filteredPersons = (filterName === '')\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()));\n\n  const handleNewName = (event) =>\n    setNewName(event.target.value);\n\n  const handleNewPhone = (event) => \n    setNewPhone(event.target.value);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newPhone\n    }\n\n    if (persons.some(person => person.name.toLowerCase() === newPerson.name.toLowerCase())) {\n      const existingPerson = persons.find(person => person.name === newPerson.name);\n\n      if (window.confirm(`${existingPerson.name} is already added to phonebook, replace the old number with a new one?`)) {\n        personsService\n          .update(existingPerson.id, newPerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(person =>\n              person.id === existingPerson.id ? updatedPerson : person))\n\n            setNewName('');\n            setNewPhone('');\n            console.log(updatedPerson);\n\n            setAddMessage(`${existingPerson.name} phone number updated to ${newPerson.number}`);\n            setTimeout(() => {\n              setAddMessage(null);\n            }, 5000);\n          })\n      }\n    } else {\n      personsService\n        .create(newPerson)\n        .then(addedPerson => {\n          setPersons(persons.concat(addedPerson));\n\n          setNewName('');\n          setNewPhone('');\n\n          setAddMessage(`Added ${newPerson.name}`);\n          setTimeout(() => {\n            setAddMessage(null);\n          }, 5000);\n        });\n    }\n  }\n\n  const handleDelete = (id) => {\n    const toRemove = persons.find(person => person.id === id);\n\n    if(!window.confirm(`Delete ${toRemove.name}?`)) {\n      return;\n    }\n\n    personsService\n      .remove(id)\n      .then(res => {\n        console.log('removed');\n        console.log(res);\n        setPersons(persons.filter(person => person.id !== id));\n      })\n      .catch(e => {\n        console.log(e);\n        //alert(`${toRemove.name} with id ${id} was already deleted from server`);\n        setErrMessage(`${toRemove.name} with id ${id} was already deleted from server`);\n        setTimeout(() => {\n          setErrMessage(null);\n        }, 5000);\n        setPersons(persons.filter(person => person.id !== id));\n      })\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <AddMessage message={addMessage} />\n      <ErrMessage message={errMessage} />\n      <Filter filterName={filterName} handleFilterName={handleFilterName} />\n      <PrintSubTitle title=\"Add number\" />\n      <AddNewPerson submitAction={addPerson} newName={newName} newPhone={newPhone}\n        handleNewPhone={handleNewPhone} handleNewName={handleNewName}/>\n      <PrintSubTitle title=\"Numbers\" />\n      <PrintPersons filteredPersons={filteredPersons} handleDelete={handleDelete} />\n    </div>\n  );\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}